<div class="card mt-4">
  <div class="card-header">
    <h4>{{ editMode ? 'Modifica Record' : 'Nuovo Record' }}</h4>
  </div>
  <div class="card-body">
    <form #form="ngForm" (ngSubmit)="onSubmit()">
      <div class="mb-3" *ngFor="let field of fields">
        <label [for]="field.key" class="form-label">{{ field.label }}</label>
        
        <input *ngIf="field.type === 'number'" 
               type="number" 
               class="form-control" 
               [id]="field.key"
               [(ngModel)]="formData[field.key]"
               [name]="field.key"
               [required]="!!field.required">
        
        <input *ngIf="!field.type || field.type === 'text' || field.type === 'email'"
               [type]="field.type || 'text'"
               class="form-control"
               [id]="field.key"
               [(ngModel)]="formData[field.key]"
               [name]="field.key"
               [required]="!!field.required">
      </div>

      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-secondary" (click)="onCancel()">
          Annulla
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
          {{ editMode ? 'Salva Modifiche' : 'Aggiungi' }}
        </button>
      </div>
    </form>
  </div>
</div>